{% extends '::base.html.twig' %}

{% block stylesheets %}
    
    {% stylesheets
        '@MondelSiteBundle/Resources/public/css/normalize.css'
        '@MondelSiteBundle/Resources/public/css/classes.css'
        '@MondelSiteBundle/Resources/public/css/form.css'
        '@MondelSiteBundle/Resources/public/css/layout.css'        
        filter='yui_css'
        output='css/compiled/main.css'
    %}
        <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
    {% endstylesheets %}

{% endblock %}

{% block body %}

    {% set error = app.session.getFlash('error') %}
    {% set notice = app.session.getFlash('notice') %}

    {% if error != '' %}

        <section id="error">Error: {{ error }}</section>

    {% endif %}

    {% if notice != '' %}

        <section id="notice">Notice: {{ notice }}</section>

    {% endif %}

    <header id="main-header" class="main-content">
        <div id="main-search-container" class="float-left">
            <input type="search" id="main-search" class="input-field">
        </div>
        <div id="user-info" class="float-right">

            {% if is_granted('ROLE_USER') %}

                <span>Hola @{{ app.security.token.user.nick }}</span>
            
            {% else %}
                
                <form id="login-form" action="{{ path('user_login_check') }}" method="post">
                    
                    {% set targetPath = app.request.getRequestUri | replace({'app_dev.php/': '', 'app.php/': ''}) %}
                    <input type="hidden" name="_target_path" value="{{ targetPath }}" />
                    
                    <input type="text" name="_username" id="username" class="input-field">
                    <input type="password" name="_password" id="password" class="input-field">
                    
                    <button id="login-button" class="button">Entrar</button>                    
                    
                    <input type="checkbox" id="remember_me" name="_remember_me" checked>
                    <span>No cerrar sesión</span>
                    <a href="{{ path('user_password_recover') }}">He perdido mi contraseña</a>
                </form>
            
            {% endif %}

        </div>
    </header>

    <section id="left-content">

        <img id="logo-image" src="{{ asset('bundles/mondelsite/img/logo_cuentalo.png') }}" alt="Cuentalo">

    </section>

    <section id="main-content" class="main-content">
        
    </section>
    
    <footer id="footer"></footer>

{% endblock %}

{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>    
    <script type="text/javascript">
    $(document.documentElement).addClass('js');
    </script>
    <script>
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-27947390-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <div id="fb-root"></div><!-- NO QUITAR ES PARA EL FACEBOOK SDK JAVASCRIPT -->    
    {#% javascripts '@MondelSiteBundle/Resources/public/js/functions.js'
                   '@MondelSiteBundle/Resources/public/js/layout.js'
                   filter='closure'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %#}
{% endblock %}


